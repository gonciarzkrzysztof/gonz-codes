var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire1d06;(0,e.register)("9Mmvp",function(t,r){Object.defineProperty(t.exports,"stegaEncodeSourceMap$1",{get:function(){return h},set:void 0,enumerable:!0,configurable:!0});var n=e("2c7Bo");let o=/_key\s*==\s*['"](.*)['"]/;function a(e){if(!Array.isArray(e))throw Error("Path is not an array");return e.reduce((e,t,r)=>{let n=typeof t;if("number"===n)return"".concat(e,"[").concat(t,"]");if("string"===n)return"".concat(e).concat(0===r?"":".").concat(t);if(("string"==typeof t?o.test(t.trim()):"object"==typeof t&&"_key"in t)&&t._key)return"".concat(e,'[_key=="').concat(t._key,'"]');if(Array.isArray(t)){let[r,n]=t;return"".concat(e,"[").concat(r,":").concat(n,"]")}throw Error("Unsupported path segment `".concat(JSON.stringify(t),"`"))},"")}let l={"\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","'":"\\'","\\":"\\\\"},i={"\\f":"\f","\\n":"\n","\\r":"\r","\\t":"	","\\'":"'","\\\\":"\\"};function c(e){let t;let r=[],n=/\['(.*?)'\]|\[(\d+)\]|\[\?\(@\._key=='(.*?)'\)\]/g;for(;null!==(t=n.exec(e));){if(void 0!==t[1]){let e=t[1].replace(/\\(\\|f|n|r|t|')/g,e=>i[e]);r.push(e);continue}if(void 0!==t[2]){r.push(parseInt(t[2],10));continue}if(void 0!==t[3]){let e=t[3].replace(/\\(\\')/g,e=>i[e]);r.push({_key:e,_index:-1});continue}}return r}function u(e){return e.map(e=>{if("string"==typeof e||"number"==typeof e)return e;if(""!==e._key)return{_key:e._key};if(-1!==e._index)return e._index;throw Error("invalid segment:".concat(JSON.stringify(e)))})}function s(e){return"object"==typeof e&&null!==e}let p="drafts.",f=({sourcePath:e,value:t})=>{if(/^\d{4}-\d{2}-\d{2}/.test(t)&&Date.parse(t)||function(e){try{new URL(e,e.startsWith("/")?"https://acme.com":void 0)}catch{return!1}return!0}(t))return!1;let r=e.at(-1);return!("slug"===e.at(-2)&&"current"===r||"string"==typeof r&&r.startsWith("_")||"number"==typeof r&&"marks"===e.at(-2)||"href"===r&&"number"==typeof e.at(-2)&&"markDefs"===e.at(-3)||"style"===r||"listItem"===r||e.some(e=>"meta"===e||"metadata"===e||"openGraph"===e||"seo"===e)||"string"==typeof r&&d.has(r))},d=new Set(["color","colour","currency","email","format","gid","hex","href","hsl","hsla","icon","id","index","key","language","layout","link","linkAction","locale","lqip","page","path","ref","rgb","rgba","route","secret","slug","status","tag","template","theme","type","unit","url","username","variant","website"]);var h=Object.freeze({__proto__:null,stegaEncodeSourceMap:function(e,t,r){var i,d,h,g,y,m,b,v,k,_;let{filter:w,logger:U,enabled:P}=r;if(!P){let n="config.enabled must be true, don't call this function otherwise";throw null==(i=null==U?void 0:U.error)||i.call(U,"[@sanity/client/stega]: ".concat(n),{result:e,resultSourceMap:t,config:r}),TypeError(n)}if(!t)return null==(d=null==U?void 0:U.error)||d.call(U,"[@sanity/client/stega]: Missing Content Source Map from response body",{result:e,resultSourceMap:t,config:r}),e;if(!r.studioUrl){let n="config.studioUrl must be defined";throw null==(h=null==U?void 0:U.error)||h.call(U,"[@sanity/client/stega]: ".concat(n),{result:e,resultSourceMap:t,config:r}),TypeError(n)}let E={encoded:[],skipped:[]},S=(_=({sourcePath:e,sourceDocument:t,resultPath:o,value:l})=>{var i;let c;if(("function"==typeof w?w({sourcePath:e,resultPath:o,filterDefault:f,sourceDocument:t,value:l}):f({sourcePath:e,resultPath:o,filterDefault:f,sourceDocument:t,value:l}))===!1)return U&&E.skipped.push({path:a(u(e)),value:"".concat(l.slice(0,20)).concat(l.length>20?"...":""),length:l.length}),l;U&&E.encoded.push({path:a(u(e)),value:"".concat(l.slice(0,20)).concat(l.length>20?"...":""),length:l.length});let{baseUrl:s,workspace:d,tool:h}=("/"!==(c="string"==typeof(i="function"==typeof r.studioUrl?r.studioUrl(t):r.studioUrl)?i:i.baseUrl)&&(c=c.replace(/\/$/,"")),"string"==typeof i)?{baseUrl:c}:{...i,baseUrl:c};if(!s)return l;let{_id:g,_type:y}=t;return(0,n.b)(l,{origin:"sanity.io",href:function(e){let{baseUrl:t,workspace:r="default",tool:n="default",id:o,type:l,path:i}=e;if(!t)throw Error("baseUrl is required");if(!i)throw Error("path is required");if(!o)throw Error("id is required");if("/"!==t&&t.endsWith("/"))throw Error("baseUrl must not end with a slash");let c="default"===r?void 0:r,s="default"===n?void 0:n,f=o.startsWith(p)?o.slice(p.length):o,d=Array.isArray(i)?a(u(i)):i,h=new URLSearchParams({baseUrl:t,id:f,type:l,path:d});c&&h.set("workspace",c),s&&h.set("tool",s);let g=["/"===t?"":t];c&&g.push(c);let y=["mode=presentation","id=".concat(f),"type=".concat(l),"path=".concat(encodeURIComponent(d))];return s&&y.push("tool=".concat(s)),g.push("intent","edit","".concat(y.join(";"),"?").concat(h)),g.join("/")}({baseUrl:s,workspace:d,tool:h,id:g,type:y,path:e})},!1)},function e(t,r,n=[]){return null!==t&&Array.isArray(t)?t.map((t,o)=>{if(s(t)){let a=t._key;if("string"==typeof a)return e(t,r,n.concat({_key:a,_index:o}))}return e(t,r,n.concat(o))}):s(t)?Object.fromEntries(Object.entries(t).map(([t,o])=>[t,e(o,r,n.concat(t))])):r(t,n)}(e,(e,r)=>{if("string"!=typeof e)return e;let n=function(e,t){var r;if(!(null==t?void 0:t.mappings))return;let n=(r=e.map(e=>{if("string"==typeof e||"number"==typeof e)return e;if(-1!==e._index)return e._index;throw Error("invalid segment:".concat(JSON.stringify(e)))}),"$".concat(r.map(e=>{if("string"==typeof e){let t=e.replace(/[\f\n\r\t'\\]/g,e=>l[e]);return"['".concat(t,"']")}if("number"==typeof e)return"[".concat(e,"]");if(""!==e._key){let t=e._key.replace(/['\\]/g,e=>l[e]);return"[?(@._key=='".concat(t,"')]")}return"[".concat(e._index,"]")}).join("")));if(void 0!==t.mappings[n])return{mapping:t.mappings[n],matchedPath:n,pathSuffix:""};let o=Object.entries(t.mappings).filter(([e])=>n.startsWith(e)).sort(([e],[t])=>t.length-e.length);if(0==o.length)return;let[a,i]=o[0],c=n.substring(a.length);return{mapping:i,matchedPath:a,pathSuffix:c}}(r,t);if(!n)return e;let{mapping:o,matchedPath:a}=n;if("value"!==o.type||"documentValue"!==o.source.type)return e;let i=t.documents[o.source.document],u=t.paths[o.source.path],s=c(a);return _({sourcePath:c(u).concat(r.slice(s.length)),sourceDocument:i,resultPath:r,value:e})}));if(U){let e=E.skipped.length,t=E.encoded.length;if((e||t)&&(null==(g=(null==U?void 0:U.groupCollapsed)||U.log)||g("[@sanity/client/stega]: Encoding source map into result"),null==(y=U.log)||y.call(U,"[@sanity/client/stega]: Paths encoded: ".concat(E.encoded.length,", skipped: ").concat(E.skipped.length))),E.encoded.length>0&&(null==(m=null==U?void 0:U.log)||m.call(U,"[@sanity/client/stega]: Table of encoded paths"),null==(b=(null==U?void 0:U.table)||U.log)||b(E.encoded)),E.skipped.length>0){let e=new Set;for(let{path:t}of E.skipped)e.add(t.replace(o,"0").replace(/\[\d+\]/g,"[]"));null==(v=null==U?void 0:U.log)||v.call(U,"[@sanity/client/stega]: List of skipped paths",[...e.values()])}(e||t)&&(null==(k=null==U?void 0:U.groupEnd)||k.call(U))}return S}})});
//# sourceMappingURL=stegaEncodeSourceMap-gZIRaYar.92ad8d91.js.map
